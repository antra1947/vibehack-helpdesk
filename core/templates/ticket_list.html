{% extends 'base.html' %}

{% block body_class %}tickets-bg{% endblock %}

{% block content %}
<h1>All Tickets</h1>
<table class="table">
  <thead>
    <tr>
      <th>Title</th>
      <th>Priority</th>
      <th>Status</th>
      <th>Created</th>
      <th>SLA</th>
    </tr>
  </thead>
  <tbody>
    {% for t in tickets %}
      <tr class="{% if t.is_overdue %}table-danger{% endif %}">
        <td><a href="{% url 'ticket_detail' t.pk %}">{{ t.title }}</a></td>
        <td>{{ t.get_priority_display }}</td>
        <td>{{ t.get_status_display }}</td>
        <td>{{ t.created_at|date:"SHORT_DATETIME_FORMAT" }}</td>
        <td>
          {% if t.due_by %}{{ t.due_by|date:"SHORT_DATETIME_FORMAT" }}{% else %}-{% endif %}
          {% if t.is_overdue %}<span class="badge bg-danger">Overdue</span>{% endif %}
        </td>
      </tr>
    {% empty %}
      <tr><td colspan="5">No tickets â€” create one!</td></tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
